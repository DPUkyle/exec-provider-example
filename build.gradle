abstract class FooVersionPrinter extends DefaultTask {
    @Input
    abstract Property<String> getResult()

    @Internal
    final Provider<String> version = result.orElse("Not installed")

    @TaskAction
    void printVersion() {
        try {
            logger.quiet(version.get())
        } catch (Exception e) {
            throw new GradleException("HALP", e)
        }
    }
}

tasks.register("printFooVersion", FooVersionPrinter) {
    Provider<String> stdout = project.providers.exec {
      commandLine("foo")
      args("-v")
      ignoreExitValue(true)
    }.standardOutput.asText

    it.result = stdout
}